(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const n=function(){function n(e,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"generateCard",(function(){i._titleElement=i._view.querySelector(".card__title"),i._imageElement=i._view.querySelector(".card__image"),i._likeButton=i._view.querySelector(".card__like-button"),i._deleteButton=i._view.querySelector(".card__trash-button")})),t(this,"render",(function(){return i._view=i._template.cloneNode(!0).querySelector(".card-li"),i.generateCard(),i._titleElement.textContent=i._dataCard.name,i._imageElement.src=i._dataCard.link,i._imageElement.alt=i._dataCard.name,i._setEventListeners(),i._view})),this._dataCard=e,this._template=r,this._handleOpenPopup=o}var r,o;return r=n,(o=[{key:"_setEventListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(t){e._view.remove()})),this._likeButton.addEventListener("click",(function(e){var t;null===(t=e.target)||void 0===t||t.classList.toggle("card__like-button_active")})),this._imageElement.addEventListener("click",(function(){e._handleOpenPopup(e._dataCard.link,e._dataCard.name)}))}}])&&e(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"toggleButtonState",(function(){r._hasInvalidInput(r._inputList)?r._buttonElement.classList.add(r._settings.inactiveButtonClass):r._buttonElement.classList.remove(r._settings.inactiveButtonClass)})),o(this,"_validate",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),o(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._settings.inputErrorClass),n.textContent=t,n.classList.add(r._settings.errorClass)})),o(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._settings.inputErrorClass),t.classList.remove(r._settings.errorClass),t.textContent=""})),o(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),this._settings=t,this._formElement=n,this._buttonElement=n.querySelector(t.submitButtonSelector),this._inputList=Array.from(n.querySelectorAll(t.inputSelector)),this._buttonElement.classList.add(this._settings.inactiveButtonClass)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){if(t.preventDefault(),e._hasInvalidInput(e._inputList))return!1})),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._validate(t),e.toggleButtonState()}))}))}}])&&r(t.prototype,n),e}();var a=document.querySelector(".popup_type_user"),u=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__title"),l=document.querySelector(".profile__subtitle"),c=a.querySelector(".popup__form"),p=a.querySelector(".popup__input_type-title"),d=a.querySelector(".popup__input_type-subtitle");function _(e){e.classList.add("popup_opened"),document.addEventListener("keydown",v)}function m(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",v)}function v(e){"Escape"===e.key&&m(document.querySelector(".popup_opened"))}u.addEventListener("click",(function(){_(a),p.value=s.textContent,d.value=l.textContent})),c.addEventListener("submit",(function(e){e.target.closest("form"),e.preventDefault(),s.textContent=p.value,l.textContent=d.value,m(a)})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&m(e),t.target.classList.contains("popup__close")&&m(e)}))}));var f=document.querySelector(".profile__add-button"),y=document.querySelector(".popup_type_card"),h=y.querySelector(".popup__form"),g=y.querySelector(".popup__input_type_img-name"),E=y.querySelector(".popup__input_type_img-link");f.addEventListener("click",(function(){return _(y)}));var b=document.querySelector(".cards__list");function S(e,t){var n=document.querySelector(".popup_type_preview"),r=n.querySelector(".popup__img-preview"),o=n.querySelector(".popup__img-title");_(n),r.src=e,o.textContent=t}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=document.querySelector(".card-template").content,r=new n(e,t,S).render();b.append(r)})),h.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".card-template").content,r=E.value,o=g.value;if(r&&o){var i=new n({link:r,name:o},t).render();b.prepend(i),h.reset(),m(y)}}));var k={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};Array.from(document.querySelectorAll(k.formSelector)).forEach((function(e){var t=new i(k,e);t.enableValidation(),t.toggleButtonState(),e.addEventListener("submit",(function(e){t.toggleButtonState()}))}))})();